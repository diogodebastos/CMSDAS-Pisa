//Loop per Event
//Loop per Lepton
TMVA::Reader *reader_mu = new TMVA::Reader( "!Color:!Silent" );
TMVA::Reader *reader_el_b = new TMVA::Reader( "!Color:!Silent" );
TMVA::Reader *reader_el_e = new TMVA::Reader( "!Color:!Silent" );

TString prefix = "TMVAClassification";
TString methodName = TString("BDTG method");


if( abs(LepGood_pdgId)==13 ) { //MUONS

// Create a set of variables and declare them to the reader
// - the variable names = branch names in the tree
//theTree->SetBranchAddress( "var4", &var4 );

   float forBDTevaluation1;
   float forBDTevaluation2;
   float forBDTevaluation3;
   float forBDTevaluation4;
   float forBDTevaluation5;
 
   //variables for MUONS
   reader_mu->AddVariable( "LepGood_miniRelIso", &forBDTevaluation1 );
   reader_mu-->AddVariable( "LepGood_relIso03", &forBDTevaluation2);
   reader_mu-->AddVariable( "LepGood_relIso04", &forBDTevaluation3);
   reader_mu-->AddVariable( "LepGood_sip3d", &forBDTevaluation4);
   reader_mu-->AddVariable( "LepGood_segmentCompatibility", &forBDTevaluation5);

   TString dir    = "dataset/weights/"; //!!!set directory where weights.xml for muons is stored
   TString weightfile = dir + prefix + TString("_") + TString("BDTG") + TString(".weights.xml");
   reader_mu->BookMVA( methodName, weightfile );
   reader_mu->EvaluateMVA( "BDTG method" );
 }

if( abs(LepGood_pdgId)==11 && abs(LepGood_eta)<1.44)) {//ELECTRONS BARREL

   float forBDTevaluation1;
   float forBDTevaluation2;
   float forBDTevaluation3;
   float forBDTevaluation4;
   float forBDTevaluation5;
   float forBDTevaluation6;

   //variables for ELECTRONS
   reader_el_b->AddVariable( "LepGood_miniRelIso", &forBDTevaluation1);
   reader_el_b->AddVariable( "LepGood_relIso03", &forBDTevaluation2);
   reader_el_b->AddVariable( "LepGood_relIso04", &forBDTevaluation3);
   reader_el_b->AddVariable( "LepGood_sip3d", &forBDTevaluation4);
   reader_el_b->AddVariable( "LepGood_sigmaIEtaIEta", &forBDTevaluation5);
   reader_el_b->AddVariable( "LepGood_mvaIdFall17noIso'", &forBDTevaluation6);

   TString dir    = "dataset/weights/"; //!!!set directory where weights.xml for electrons in barrel is stored
   TString weightfile = dir + prefix + TString("_") + TString("BDTG") + TString(".weights.xml");
   reader_el_b->BookMVA( methodName, weightfile );
   reader_el_b->EvaluateMVA( "BDTG method" );
 }

if( abs(LepGood_pdgId)==11 && abs(LepGood_eta)>1.56)) {//ELECTRONS ENDCAP

   float forBDTevaluation1;
   float forBDTevaluation2;
   float forBDTevaluation3;
   float forBDTevaluation4;
   float forBDTevaluation5;
   float forBDTevaluation6;

   //variables for ELECTRONS
   reader_el_e->AddVariable( "LepGood_miniRelIso", &forBDTevaluation1);
   reader_el_e->AddVariable( "LepGood_relIso03", &forBDTevaluation2);
   reader_el_e->AddVariable( "LepGood_relIso04", &forBDTevaluation3);
   reader_el_e->AddVariable( "LepGood_sip3d", &forBDTevaluation4);
   reader_el_e->AddVariable( "LepGood_sigmaIEtaIEta", &forBDTevaluation5);
   reader_el_e->AddVariable( "LepGood_mvaIdFall17noIso'", &forBDTevaluation6);

   TString dir    = "dataset/weights/"; //!!!set directory where weights.xml for electrons in endcap is stored
   TString weightfile = dir + prefix + TString("_") + TString("BDTG") + TString(".weights.xml");
   reader_el_e->BookMVA( methodName, weightfile );
   reader_el_e->EvaluateMVA( "BDTG method" );
 }



